<%def name="fslink(id, text)">
<a href="https://foursquare.com/v/${id}">${text}</a>
</%def>
<%include file="header.html"/>
<style>
    tr { height: 1px; }
    td { height:100%; min-width: 75px; }
    label { display:block; height: 100%; }
    input[type="submit"] { position: fixed; top:0.5em; }
    body { margin-top: 2.5em; }
    tr.warn { background-color: yellow; }
    tr.error { background-color: red; }
    .done { display: none; }
</style>

<form action="${url}" method="POST">
    <input type="submit"/>
    <table border="1">
        % for (v, edit, trclass) in venues:
        <% edit = v.getEdit() %>
        <tr class="${trclass}">
            <td>
                ${fslink(v['id'], v['name'])}
            </td>
            <td>
                % for type, after in edit.items():
                <% tag = 'i' if type.find('Category') > -1 else 'b' %>
                ${type} -&gt; <${tag}>${after}</${tag}><br/>
                % endfor
            </td>
            <td>
                % if edit:
                    % if is_done:
                    ${fslink(v['id'], 'Submitted')}
                    % else:
                    <label>
                        <input type="checkbox" name="approved" value="${v['id']}">
                    </label>
                    % endif
                % else:
                ${fslink(v['id'], 'No edits')}
                % endif
            </td>
        </tr>
        % endfor
    </table>
</form>
<%include file="footer.html"/>
